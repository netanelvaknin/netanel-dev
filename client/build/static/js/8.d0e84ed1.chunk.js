(this["webpackJsonpnetanel-dev-frontend"]=this["webpackJsonpnetanel-dev-frontend"]||[]).push([[8],{245:function(t,e,n){"use strict";n.r(e);var c=n(171),r=n.n(c),i=n(172),a=n(27),o=n(13),s=n(173),d=n(195),l=n(196),u=n(47),j=n(45),b=n(392),p=n(8),h=n(677),f=n(3),O=d.a().shape({email:d.b().email().required(),password:d.b().min(2).max(25).required()});e.default=function(){var t=Object(b.a)(),e=Object(a.a)(t,2),n=(e[0],e[1]),c=Object(p.g)(),o=Object(s.d)({resolver:Object(l.a)(O)}),d=o.register,h=o.handleSubmit,g=o.formState.errors,v=o.setError,k=function(){var t=Object(i.a)(r.a.mark((function t(e){var i,a,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.email,a=e.password,t.prev=1,t.next=4,j.a.post("/admin/login",{email:i,password:a});case 4:if(!(o=t.sent).data.token){t.next=10;break}n("token",o.data.token),c.push("/admin"),t.next=11;break;case 10:throw new Error;case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.log("here"),v("username",{type:"manual",message:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05d0\u05d5 \u05e1\u05d9\u05e1\u05de\u05d0 \u05dc\u05d0 \u05ea\u05d5\u05d0\u05de\u05d9\u05dd"});case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("form",{onSubmit:h(k),children:[Object(f.jsx)(m,{name:"email",type:"email",register:d,placeholder:"\u05db\u05ea\u05d5\u05d1\u05ea \u05de\u05d9\u05d9\u05dc"}),Object(f.jsx)(u.d,{type:"password",name:"password",register:d,placeholder:"\u05e1\u05d9\u05e1\u05de\u05d4"}),Object(f.jsx)(x,{variant:"contained",color:"secondary",type:"submit",children:"\u05db\u05e0\u05d9\u05e1\u05d4"}),g.username&&Object(f.jsx)(u.a,{children:g.username.message})]})};var m=Object(o.c)(u.d).withConfig({displayName:"Login__TextFieldStyle",componentId:"iml4lg-0"})(["&.MuiFormControl-root{margin-bottom:2rem;}"]),x=Object(o.c)(h.a).withConfig({displayName:"Login__ButtonStyle",componentId:"iml4lg-1"})(["&.MuiButtonBase-root{margin-top:2rem;}"])},680:function(t,e,n){"use strict";n.r(e);var c=n(27),r=n(0),i=n(392),a=n(8),o=n(50),s=n(171),d=n.n(s),l=n(172),u=n(13),j=n(368),b=n.n(j),p=(n(391),n(45)),h=n(173),f=n(86),O=n.n(f),m=n(3);var x=function(){var t=Object(a.g)(),e=Object(i.a)(),n=Object(c.a)(e,1)[0],s=Object(r.useState)(""),u=Object(c.a)(s,2),j=u[0],f=u[1],x=Object(h.d)({defaultValues:{title:"",description:""}}),k=x.register,w=x.setValue,y=x.handleSubmit,_=Object(a.i)().postId;Object(r.useEffect)((function(){p.a.get("/posts").then((function(t){if(t.data&&_){var e=t.data.find((function(t){return t._id===_}));f(e.content),w("title",e.title),w("description",e.description)}}))}),[_,w]),Object(r.useEffect)((function(){_||S()}),[_]);var S=function(){w("title",""),f("")},C=function(){var e=Object(l.a)(d.a.mark((function e(c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=5;break}return e.next=3,p.a.post("/posts/update",{_id:_,content:j,title:c.title,description:c.description},{headers:{Authorization:"Bearer ".concat(n.token)}}).then((function(e){200===e.status&&(S(),t.push("/admin/posts"))}));case 3:e.next=7;break;case 5:return e.next=7,p.a.post("/posts/insert",{content:j,title:c.title,createdAt:O()().format("ll"),description:c.description},{headers:{Authorization:"Bearer ".concat(n.token)}}).then((function(e){200===e.status&&(S(),t.push("/admin/posts"))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("form",{onSubmit:y(C),children:[Object(m.jsx)("input",Object(o.a)(Object(o.a)({},k("title")),{},{name:"title",placeholder:"\u05db\u05d5\u05ea\u05e8\u05ea \u05d4\u05e4\u05d5\u05e1\u05d8"})),Object(m.jsx)("input",Object(o.a)(Object(o.a)({},k("description")),{},{name:"description",placeholder:"\u05ea\u05d9\u05d0\u05d5\u05e8"})),Object(m.jsx)(g,{children:Object(m.jsx)(b.a,{theme:"snow",value:j,onChange:function(t,e,n,c){f(c.getHTML())},modules:v})}),Object(m.jsx)("button",{type:"submit",children:_?"\u05e2\u05d3\u05db\u05df":"\u05d4\u05d5\u05e1\u05e3"})]})},g=u.c.div.withConfig({displayName:"AddPost__EditorWrapper",componentId:"sc-19wpfk2-0"})([".ql-syntax{direction:ltr;}"]),v={toolbar:[[{header:[1,2,!1]}],["blockquote","code-block"],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}]]};var k=function(){var t=Object(r.useState)([]),e=Object(c.a)(t,2),n=e[0],o=e[1],s=Object(r.useState)(!1),u=Object(c.a)(s,2),j=u[0],b=u[1],h=Object(a.g)(),f=Object(i.a)(),O=Object(c.a)(f,1)[0];Object(r.useEffect)((function(){b(!0),p.a.get("/posts").then((function(t){o(t.data),b(!1)}))}),[]);var x=function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("/posts/delete",{_id:e},{headers:{Authorization:"Bearer ".concat(O.token)}}).then((function(t){200===t.status&&window.location.reload()}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)("div",{children:n.length>0?n.map((function(t){return Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:t.title}),Object(m.jsxs)("p",{children:[t.createdAt," \u05e0\u05d5\u05e6\u05e8 \u05d1-"]}),Object(m.jsx)("button",{onClick:function(){return h.push("/admin/".concat(t._id))},children:"\u05e2\u05e8\u05d9\u05db\u05d4"}),Object(m.jsx)("button",{onClick:function(){x(t._id)},children:"\u05de\u05d7\u05d9\u05e7\u05d4"})]},t._id)})):Object(m.jsx)("div",{children:j?Object(m.jsx)("h1",{children:"Loading..."}):Object(m.jsx)("h1",{children:"No posts"})})})},w=n(245),y=u.c.aside.withConfig({displayName:"AdminStyles__Sidebar",componentId:"sc-1k5q17u-0"})(["height:90vh;display:flex;flex-direction:column;margin-left:2rem;padding-left:2rem;border-left:1px solid rgba(0,0,0,0.12);& .MuiButton-text,.MuiButton-text:hover{text-decoration:none;}"]),_=n(677);e.default=function(){var t=Object(a.j)().url,e=Object(i.a)(),n=Object(c.a)(e,1)[0],o=Object(a.g)();return Object(r.useEffect)((function(){n.token||o.push("/admin/login")}),[n,o]),Object(m.jsxs)("div",{style:{display:"flex"},children:["/admin/login"!==o.location.pathname&&Object(m.jsxs)(y,{children:[Object(m.jsx)(_.a,{onClick:function(){return o.push("".concat(t,"/posts"))},children:"\u05d4\u05de\u05d0\u05de\u05e8\u05d9\u05dd \u05e9\u05dc\u05d9"}),Object(m.jsx)(_.a,{onClick:function(){return o.push("".concat(t,"/posts/insert"))},children:"\u05d4\u05d5\u05e1\u05e3 \u05de\u05d0\u05de\u05e8 \u05d7\u05d3\u05e9"})]}),Object(m.jsxs)(a.d,{children:[Object(m.jsx)(a.b,{exact:!0,path:"".concat(t,"/posts"),children:Object(m.jsx)(k,{})}),Object(m.jsx)(a.b,{exact:!0,path:"".concat(t,"/login"),children:Object(m.jsx)(w.default,{})}),Object(m.jsx)(a.b,{exact:!0,path:"".concat(t,"/posts/insert"),children:Object(m.jsx)(x,{})}),Object(m.jsx)(a.b,{path:"".concat(t,"/:postId"),children:Object(m.jsx)(x,{})})]})]})}}}]);
//# sourceMappingURL=8.d0e84ed1.chunk.js.map