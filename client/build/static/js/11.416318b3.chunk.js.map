{"version":3,"sources":["pages/admin/login/Login.tsx"],"names":["schema","Yup","shape","email","required","password","min","max","Login","useCookies","setCookie","history","useHistory","useForm","resolver","yupResolver","register","handleSubmit","onSubmit","formState","errors","a","instance","post","response","data","token","push","console","log","name","type"],"mappings":"qPAQMA,EAASC,MAAaC,MAAM,CAChCC,MAAOF,MAAaE,QAAQC,WAC5BC,SAAUJ,MAAaK,IAAI,GAAGC,IAAI,IAAIH,aAwCzBI,UAhCf,WACE,MAA6BC,cAA7B,mBAAgBC,GAAhB,WACMC,EAAUC,cAChB,EAIIC,YAAQ,CACVC,SAAUC,YAAYf,KAJtBgB,EADF,EACEA,SACAC,EAFF,EAEEA,aAMIC,GARN,EAGEC,UAAaC,OAKD,uCAAG,iCAAAC,EAAA,6DAASlB,EAAT,EAASA,MAAOE,EAAhB,EAAgBA,SAAhB,kBAEUiB,IAASC,KAAK,eAAgB,CAAEpB,QAAOE,aAFjD,QAEPmB,EAFO,QAGAC,KAAKC,QAChBhB,EAAU,QAASc,EAASC,KAAKC,OACjCf,EAAQgB,KAAK,WALF,gDAQbC,QAAQC,IAAI,QAAZ,MARa,yDAAH,uDAYd,OACE,uBAAMX,SAAUD,EAAaC,GAA7B,UACE,cAAC,IAAD,CAAWY,KAAK,QAAQC,KAAK,QAAQf,SAAUA,IAC/C,cAAC,IAAD,CAAWe,KAAK,WAAWD,KAAK,WAAWd,SAAUA,IACrD,wBAAQe,KAAK,SAAb","file":"static/js/11.416318b3.chunk.js","sourcesContent":["import { useForm } from \"react-hook-form\";\r\nimport * as Yup from \"yup\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { TextField } from \"../../../ui\";\r\nimport instance from \"../../../api\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst schema = Yup.object().shape({\r\n  email: Yup.string().email().required(),\r\n  password: Yup.string().min(2).max(25).required(),\r\n});\r\n\r\ninterface LoginValues {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\nfunction Login() {\r\n  const [cookies, setCookie] = useCookies();\r\n  const history = useHistory();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n  });\r\n\r\n  const onSubmit = async ({ email, password }: LoginValues) => {\r\n    try {\r\n      const response = await instance.post(\"/admin/login\", { email, password });\r\n      if (response.data.token) {\r\n        setCookie(\"token\", response.data.token);\r\n        history.push(\"/admin\");\r\n      }\r\n    } catch (e) {\r\n      console.log(\"E => \", e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onSubmit)}>\r\n      <TextField name=\"email\" type=\"email\" register={register} />\r\n      <TextField type=\"password\" name=\"password\" register={register} />\r\n      <button type=\"submit\">Login</button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"sourceRoot":""}