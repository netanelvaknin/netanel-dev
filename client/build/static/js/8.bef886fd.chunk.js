(this["webpackJsonpnetanel-dev-frontend"]=this["webpackJsonpnetanel-dev-frontend"]||[]).push([[8],{245:function(t,e,n){"use strict";n.r(e);var c=n(171),i=n.n(c),a=n(172),r=n(27),s=n(173),o=n(195),u=n(196),d=n(47),l=n(45),j=n(392),b=n(8),p=n(3),h=o.a().shape({email:o.b().email().required(),password:o.b().min(2).max(25).required()});e.default=function(){var t=Object(j.a)(),e=Object(r.a)(t,2),n=(e[0],e[1]),c=Object(b.f)(),o=Object(s.d)({resolver:Object(u.a)(h)}),f=o.register,O=o.handleSubmit,x=(o.formState.errors,function(){var t=Object(a.a)(i.a.mark((function t(e){var a,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.email,r=e.password,t.prev=1,t.next=4,l.a.post("/admin/login",{email:a,password:r});case 4:(s=t.sent).data.token&&(n("token",s.data.token),c.push("/admin")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("E => ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}());return Object(p.jsxs)("form",{onSubmit:O(x),children:[Object(p.jsx)(d.c,{name:"email",type:"email",register:f}),Object(p.jsx)(d.c,{type:"password",name:"password",register:f}),Object(p.jsx)("button",{type:"submit",children:"Login"})]})}},680:function(t,e,n){"use strict";n.r(e);var c=n(27),i=n(0),a=n(392),r=n(8),s=n(50),o=n(171),u=n.n(o),d=n(172),l=n(14),j=n(368),b=n.n(j),p=(n(391),n(45)),h=n(173),f=n(86),O=n.n(f),x=n(3);var m=function(){var t=Object(r.f)(),e=Object(a.a)(),n=Object(c.a)(e,1)[0],o=Object(i.useState)(""),l=Object(c.a)(o,2),j=l[0],f=l[1],m=Object(h.d)({defaultValues:{title:"",description:""}}),g=m.register,w=m.setValue,y=m.handleSubmit,S=Object(r.h)().postId;Object(i.useEffect)((function(){p.a.get("/posts").then((function(t){if(t.data&&S){var e=t.data.find((function(t){return t._id===S}));f(e.content),w("title",e.title),w("description",e.description)}}))}),[S,w]),Object(i.useEffect)((function(){S||_()}),[S]);var _=function(){w("title",""),f("")},C=function(){var e=Object(d.a)(u.a.mark((function e(c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=5;break}return e.next=3,p.a.post("/posts/update",{_id:S,content:j,title:c.title},{headers:{Authorization:"Bearer ".concat(n.token)}}).then((function(e){200===e.status&&(_(),t.push("/admin/posts"))}));case 3:e.next=7;break;case 5:return e.next=7,p.a.post("/posts/insert",{content:j,title:c.title,createdAt:O()().format("ll"),description:c.description},{headers:{Authorization:"Bearer ".concat(n.token)}}).then((function(e){200===e.status&&(_(),t.push("/admin/posts"))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("form",{onSubmit:y(C),children:[Object(x.jsx)("input",Object(s.a)(Object(s.a)({},g("title")),{},{name:"title",placeholder:"\u05db\u05d5\u05ea\u05e8\u05ea \u05d4\u05e4\u05d5\u05e1\u05d8"})),Object(x.jsx)("input",Object(s.a)(Object(s.a)({},g("description")),{},{name:"description",placeholder:"\u05ea\u05d9\u05d0\u05d5\u05e8"})),Object(x.jsx)(v,{children:Object(x.jsx)(b.a,{theme:"snow",value:j,onChange:function(t,e,n,c){f(c.getHTML())},modules:k})}),Object(x.jsx)("button",{type:"submit",children:S?"\u05e2\u05d3\u05db\u05df":"\u05d4\u05d5\u05e1\u05e3"})]})},v=l.c.div.withConfig({displayName:"AddPost__EditorWrapper",componentId:"sc-19wpfk2-0"})([".ql-syntax{direction:ltr;}"]),k={toolbar:[[{header:[1,2,!1]}],["blockquote","code-block"],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}]]};var g=function(){var t=Object(i.useState)([]),e=Object(c.a)(t,2),n=e[0],s=e[1],o=Object(i.useState)(!1),l=Object(c.a)(o,2),j=l[0],b=l[1],h=Object(r.f)(),f=Object(a.a)(),O=Object(c.a)(f,1)[0];Object(i.useEffect)((function(){b(!0),p.a.get("/posts").then((function(t){s(t.data),b(!1)}))}),[]);var m=function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("/posts/delete",{_id:e},{headers:{Authorization:"Bearer ".concat(O.token)}}).then((function(t){200===t.status&&window.location.reload()}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsx)("div",{children:n.length>0?n.map((function(t){return Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:t.title}),Object(x.jsxs)("p",{children:[t.createdAt," \u05e0\u05d5\u05e6\u05e8 \u05d1-"]}),Object(x.jsx)("button",{onClick:function(){return h.push("/admin/".concat(t._id))},children:"\u05e2\u05e8\u05d9\u05db\u05d4"}),Object(x.jsx)("button",{onClick:function(){m(t._id)},children:"\u05de\u05d7\u05d9\u05e7\u05d4"})]},t._id)})):Object(x.jsx)("div",{children:j?Object(x.jsx)("h1",{children:"Loading..."}):Object(x.jsx)("h1",{children:"No posts"})})})},w=n(245);e.default=function(){var t=Object(r.i)().url,e=Object(a.a)(),n=Object(c.a)(e,1)[0],s=Object(r.f)();return Object(i.useEffect)((function(){n.token||s.push("/admin/login")}),[n,s]),Object(x.jsxs)("div",{style:{display:"flex"},children:["/admin/login"!==s.location.pathname&&Object(x.jsxs)("nav",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:"100vh",width:"20rem",paddingTop:"3rem"},children:[Object(x.jsx)("button",{onClick:function(){return s.push("".concat(t,"/posts"))},children:"\u05d4\u05de\u05d0\u05de\u05e8\u05d9\u05dd \u05e9\u05dc\u05d9"}),Object(x.jsx)("button",{onClick:function(){return s.push("".concat(t,"/posts/insert"))},children:"\u05d4\u05d5\u05e1\u05e3 \u05de\u05d0\u05de\u05e8 \u05d7\u05d3\u05e9"}),Object(x.jsx)("button",{onClick:function(){return s.push("/")},children:"\u05d3\u05e3 \u05d4\u05d1\u05d9\u05ea"})]}),Object(x.jsxs)(r.c,{children:[Object(x.jsx)(r.a,{exact:!0,path:"".concat(t,"/posts"),children:Object(x.jsx)(g,{})}),Object(x.jsx)(r.a,{exact:!0,path:"".concat(t,"/login"),children:Object(x.jsx)(w.default,{})}),Object(x.jsx)(r.a,{exact:!0,path:"".concat(t,"/posts/insert"),children:Object(x.jsx)(m,{})}),Object(x.jsx)(r.a,{path:"".concat(t,"/:postId"),children:Object(x.jsx)(m,{})})]})]})}}}]);
//# sourceMappingURL=8.bef886fd.chunk.js.map