{"version":3,"sources":["pages/home/newsletter/Newsletter.tsx","assets/gifs/loader.gif","pages/blog/Blog.tsx"],"names":["schema","Yup","shape","email","required","PrimaryHeading","styled","h2","props","theme","fonts","bold","Newsletter","title","useState","registered","setRegistered","isSmallScreen","useSmallScreen","useForm","resolver","yupResolver","register","handleSubmit","setError","errors","formState","onSubmit","a","instance","post","status","type","message","style","marginTop","maxWidth","margin","label","name","error","errorMessage","variant","color","BlogContainer","div","postsLength","PostContainer","PostNumber","span","CreatedAtText","light","Blog","posts","useFetchPosts","history","useHistory","length","map","index","onClick","push","_id","createdAt","display","flexDirection","src","loader","alt","width","height","textAlign","fontSize"],"mappings":"6PAcMA,EAASC,MAAaC,MAAM,CAChCC,MAAOF,MACJE,MAAM,mHACNC,SAAS,2HAsERC,EAAiBC,IAAOC,GAAV,6EAAGD,CAAH,uDAGH,SAACE,GAAD,OAAWA,EAAMC,MAAMC,MAAMC,QAG/BC,IAzEI,SAAC,GAEI,IAAD,IADnBC,aACmB,MADX,+PACW,EACrB,EAAoCC,oBAAS,GAA7C,mBAAOC,EAAP,KAAmBC,EAAnB,KACMC,EAAgBC,cACtB,EAKIC,YAAQ,CACVC,SAAUC,YAAYrB,KALtBsB,EADF,EACEA,SACAC,EAFF,EAEEA,aACAC,EAHF,EAGEA,SACaC,EAJf,EAIEC,UAAaD,OAKTE,EAAQ,uCAAG,6BAAAC,EAAA,2DAASzB,EAAT,EAASA,OAAT,0CAGY0B,IAASC,KAAK,qBAAsB,CAAE3B,UAHlD,OAIa,MAJb,OAIE4B,QACXf,GAAc,GALL,gDAQXQ,EAAS,QAAS,CAChBQ,KAAM,SACNC,QAAS,sNAVA,yDAAH,sDAgBd,OACE,qBAAKC,MAAO,CAAEC,UAAWlB,EAAgB,OAAS,QAAlD,SACGF,EACC,qCACE,cAACV,EAAD,oLACA,cAACA,EAAD,0EAGF,uBAAMsB,SAAUJ,EAAaI,GAA7B,UACE,cAACtB,EAAD,UACGQ,IAEH,0UACA,qBAAKqB,MAAO,CAAEE,SAAU,QAASC,OAAQ,eAAzC,SACE,cAAC,IAAD,CACEC,MAAM,sEACNC,KAAK,QACLjB,SAAUA,EACVkB,QAASf,EAAOtB,MAChBsC,aAAchB,EAAOtB,OAASsB,EAAOtB,MAAM8B,YAI/C,cAAC,IAAD,CACES,QAAQ,YACRC,MAAM,YACNX,KAAK,SACLE,MAAO,CAAEC,UAAW,QAJtB,4E,iCCzEK,QAA0B,oC,4FCgDzC,IAAMS,EAAgBtC,IAAOuC,IAAV,0EAAGvC,CAAH,SACf,SAACE,GAAD,OACsB,IAAtBA,EAAMsC,aAAN,sFAQEC,EAAgBzC,IAAOuC,IAAV,0EAAGvC,CAAH,2FAWb0C,EAAa1C,IAAO2C,KAAV,uEAAG3C,CAAH,gFACC,SAACE,GAAD,OAAWA,EAAMC,MAAMC,MAAMC,QAMxCuC,EAAgB5C,IAAO2C,KAAV,0EAAG3C,CAAH,qEAEF,SAACE,GAAD,OAAWA,EAAMC,MAAMC,MAAMyC,SAK/BC,UA5Ef,WACE,IAAMC,EAAQC,cACRC,EAAUC,cAEhB,OACE,cAACZ,EAAD,CAAeE,YAAaO,EAAMI,OAAlC,SACGJ,EAAMI,OAAS,EACd,qCACE,+QADF,OAEGJ,QAFH,IAEGA,OAFH,EAEGA,EAAOK,KAAI,SAAC5B,EAAiB6B,GAC5B,OACE,eAACZ,EAAD,CAEEa,QAAS,kBAAML,EAAQM,KAAR,gBAAsB/B,EAAKgC,OAF5C,UAIE,cAACd,EAAD,UAAaW,EAAQ,IACrB,gCACE,6BAAK7B,EAAKjB,QACV,eAACqC,EAAD,6EAA6BpB,EAAKiC,kBAN/BjC,EAAKgC,QAWhB,cAAC,IAAD,CAAYjD,MAAM,gJAGpB,sBAAKqB,MAAO,CAAE8B,QAAS,OAAQC,cAAe,UAA9C,UACE,qBACEC,IAAKC,IACLC,IAAI,gEACJlC,MAAO,CAAEmC,MAAO,QAASC,OAAQ,WAEnC,oBAAIpC,MAAO,CAAEqC,UAAW,SAAUC,SAAU,QAA5C","file":"static/js/7.9c12061e.chunk.js","sourcesContent":["import { useState } from \"react\";\r\nimport { TextField } from \"../../../ui\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport * as Yup from \"yup\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport instance from \"../../../api\";\r\nimport styled from \"styled-components/macro\";\r\nimport {useSmallScreen} from '../../../hooks/useSmallScreen';\r\n\r\ninterface NewsletterProps {\r\n    title?: string;\r\n}\r\n\r\nconst schema = Yup.object().shape({\r\n  email: Yup.string()\r\n    .email(\"כתובת אימייל לא חוקית\")\r\n    .required(\"נא להכניס כתובת אימייל\"),\r\n});\r\n\r\nconst Newsletter = ({\r\n    title = 'הרשמו עכשיו לניווזלטר שלי ותקבלו עדכונים שוטפים'\r\n}: NewsletterProps) => {\r\n  const [registered, setRegistered] = useState(false);\r\n  const isSmallScreen = useSmallScreen();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    setError,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n  });\r\n\r\n  const onSubmit = async ({ email }: { email: string }) => {\r\n    if (email) {\r\n      try {\r\n        const response = await instance.post(\"/newsletter/signup\", { email });\r\n        if (response.status === 200) {\r\n          setRegistered(true);\r\n        }\r\n      } catch (e) {\r\n        setError(\"email\", {\r\n          type: \"manual\",\r\n          message: \"כתובת האימייל שהזנת כבר רשומה לניווזלטר\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div style={{ marginTop: isSmallScreen ? \"6rem\" : \"9rem\" }}>\r\n      {registered ? (\r\n        <>\r\n          <PrimaryHeading>ההרשמה לעדכוני הניווזלטר נקלטה</PrimaryHeading>\r\n          <PrimaryHeading>תודה רבה 🙏</PrimaryHeading>\r\n        </>\r\n      ) : (\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <PrimaryHeading>\r\n            {title}\r\n          </PrimaryHeading>\r\n          <p>מבטיח לא לחפור ולשלוח עדכונים רק כשיוצאים מאמרים חדשים 😉</p>\r\n          <div style={{ maxWidth: \"50rem\", margin: \"2rem 0 1rem\" }}>\r\n            <TextField\r\n              label=\"כתובת אימייל\"\r\n              name=\"email\"\r\n              register={register}\r\n              error={!!errors.email}\r\n              errorMessage={errors.email && errors.email.message}\r\n            />\r\n          </div>\r\n\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            type=\"submit\"\r\n            style={{ marginTop: \"2rem\" }}\r\n          >\r\n            תרשום אותי\r\n          </Button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst PrimaryHeading = styled.h2`\r\n  font-size: 2.5rem;\r\n  line-height: 1.3;\r\n  font-family: ${(props) => props.theme.fonts.bold};\r\n`;\r\n\r\nexport default Newsletter;\r\n","export default __webpack_public_path__ + \"static/media/loader.45b6b611.gif\";","import { useFetchPosts } from \"../../hooks\";\r\nimport { PostModel } from \"../../context/posts/PostsProvider\";\r\nimport styled from \"styled-components/macro\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport loader from \"../../assets/gifs/loader.gif\";\r\nimport Newsletter from \"../home/newsletter/Newsletter\";\r\n\r\nfunction Blog() {\r\n  const posts = useFetchPosts();\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <BlogContainer postsLength={posts.length}>\r\n      {posts.length > 0 ? (\r\n        <>\r\n          <p>את המאמרים יש לקרוא לפי סדר המספרים. קריאה מהנה.</p>\r\n          {posts?.map((post: PostModel, index: number) => {\r\n            return (\r\n              <PostContainer\r\n                key={post._id}\r\n                onClick={() => history.push(`/blog/${post._id}`)}\r\n              >\r\n                <PostNumber>{index + 1}</PostNumber>\r\n                <div>\r\n                  <h2>{post.title}</h2>\r\n                  <CreatedAtText>נכתב בתאריך: {post.createdAt}</CreatedAtText>\r\n                </div>\r\n              </PostContainer>\r\n            );\r\n          })}\r\n          <Newsletter title=\"אהבתם? הרשמו לניווזלטר שלי\" />\r\n        </>\r\n      ) : (\r\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n          <img\r\n            src={loader}\r\n            alt=\"טוען מאמרים\"\r\n            style={{ width: \"20rem\", height: \"20rem\" }}\r\n          />\r\n          <h2 style={{ textAlign: \"center\", fontSize: \"3rem\" }}>\r\n            מאמרים בטעינה\r\n          </h2>\r\n        </div>\r\n      )}\r\n    </BlogContainer>\r\n  );\r\n}\r\n\r\nconst BlogContainer = styled.div<{ postsLength: number }>`\r\n  ${(props) =>\r\n    props.postsLength === 0 &&\r\n    `\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  `}\r\n`;\r\n\r\nconst PostContainer = styled.div`\r\n  margin: 2rem 0 3rem 0;\r\n  max-width: 31rem;\r\n  display: flex;\r\n  cursor: pointer;\r\n\r\n  h2 {\r\n    line-height: 1.3;\r\n  }\r\n`;\r\n\r\nconst PostNumber = styled.span`\r\n  font-family: ${(props) => props.theme.fonts.bold};\r\n  font-size: 4rem;\r\n  color: rgba(230, 230, 230, 1);\r\n  margin-left: 2rem;\r\n`;\r\n\r\nconst CreatedAtText = styled.span`\r\n  font-size: 1.8rem;\r\n  font-family: ${(props) => props.theme.fonts.light};\r\n  display: block;\r\n  margin-top: 1rem;\r\n`;\r\n\r\nexport default Blog;\r\n"],"sourceRoot":""}